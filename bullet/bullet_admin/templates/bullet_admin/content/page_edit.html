{% extends "bullet_admin/base.html" %}
{% load badmin %}

{% block title %}
  Edit page
{% endblock title %}

{% block extrahead %}
  {% include "bullet_admin/components/markdown_scripts.html" %}
{% endblock extrahead %}

{% block content %}
  <div class="p-8 mx-auto max-w-3xl">
    {% aheader %}
      {% slot title %}
        Edit page
      {% endslot %}
      {% slot buttons %}
        {% url "badmin:page_block_list" page_id=page.id as block_url %}
        {% #abtn icon="mdi:code-block-parentheses" label="Page blocks" url=block_url %}
        {% url "badmin:page_copy" page_id=page.id as copy_url %}
        {% #abtn icon="mdi:content-paste" label="Copy from..." url=copy_url %}
      {% endslot %}
    {% endaheader %}

    {% if page.pageblock_set.exists %}
      <div class="bg-amber-100 text-amber-800 text-sm p-4 -mt-4 mb-6 rounded-md">
        <p>
          <b>This page uses page blocks.</b> If you want to edit its content, click on the page blocks button above. The text inside the "content" field on this page is ignored.
        </p>
      </div>
    {% endif %}

    <form method="post">
      {% csrf_token %}
      {% admin_form2 form %}
      {{ formset.management_form }}
      <div class="mt-6">
        {% #abtn button label="Save" icon="mdi:content-save" color="blue" %}
      </div>
    </form>
  </div>
{% endblock content %}
